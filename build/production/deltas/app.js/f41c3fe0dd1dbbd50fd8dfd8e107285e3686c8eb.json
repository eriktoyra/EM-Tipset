["/*55cde9d33ecfb079a7336abc4c1d2e37a594bf23",42,226256,"xt.SegmentedButton",202670,33,"segmentedbutton\",requires:[\"Ext.Button",279679,38,"segmentedbutton",244639,32,"button-pressed\",allowMultiple:false,allowDepress:null,pressedButtons:[]",405481,38,"defaultType:\"button\"",242492,52,"on({delegate:\"> button\",scope:a,tap:\"onButtonRelease\"});a.onAfter({delegate:\"> button\",scope:a,hiddenchange:\"onButtonHiddenChange\"})},updateAllowMultiple:function(){if(!this.initialized&&!this.getInitialConfig().hasOwnProperty(\"allowDepress\")){this.setAllowDepress(true)}},applyItems:function(){var e=this,f=[],d,b,c,a;e.callParent(arguments);a=this.getItems(",152757,32,"a.items[b];if(c.getInitialConfig(\"pressed\")){f.push(a.items[b])}}e.updateFirstAndLastCls(a);e.setPressedButtons(f)},onButtonRelease:function(a){var d=this,e=d.getPressedButtons()||[],c=[],b;if(!d.getDisabled()&&!a.getDisabled()){if(d.getAllowMultiple()){c=e.concat(c)}b=(c.indexOf(a)!==-1)||(e.indexOf(a)!==-1);if(b&&d.getAllowDepress()){Ext.Array.remove(c,a)}else{if(!b||!d.getAllowDepress()){c.push(a)}}d.setPressedButtons(c);Ext.defer(function(){d.fireEvent(\"toggle\",d,a,d.isPressed(a))},50)}},onButtonHiddenChange:function(){this.updateFirstAndLastCls(this.getItems())},updateFirstAndLastCls:function(a){var d=a.length,e=Ext.baseCSSPrefix,c,b;for(b=0;b<d;b++){c=a.items[b];if(!c.isHidden()){c.addCls(e+\"first\");break}}for(b=d-1;b>=0;b--){c=a.items[b];if(!c.isHidden()){c.addCls(e+\"last\");break}}},applyPressedButtons:function(a){var e=this,f=[],c,d,b;if(Ext.isArray(a)){",152759,32,"getComponent(a[b]);if(c&&f.indexOf(c)===-1){f.push(c)}}}else{c=e.getComponent(a);if(c&&f.indexOf(c)===-1){f.push(c)}}return f},updatePressedButtons:function(a){var h=this,b=h.getItems(),g=h.getPressedCls(),f,d,e,c;e=b.length;for(c=0;c<e;c++){f=b.items[c];f.removeCls([g,f.getPressedCls()])}e=a.length;for(c=0;c<e;c++){d=a[c];d.addCls(g)}},isPressed:function(a){var b=this.getPressedButtons();return b.indexOf(a)!=-1},doSetDisabled:function(a){var b=this;b.items.each(function(c){c.setDisabled(a)},b);b",139685,52,"M.view.Main",202670,33,"main\",id:\"main\"});Ext.define(\"EM.view.Viewport\",{extend:\"Ext.Container\",config:{fullscreen:true,scrollable:\"vertical\",items:[{xtype:\"toptoolbar\",docked:\"top\"},{xtype:\"mainnav\",docked:\"top\"},{xtype:\"mystats\"},{xtype:\"main\"}]}});Ext.define(\"EM.view.TopToolbar\",{extend:\"Ext.Toolbar\",xtype:\"toptoolbar\",defaults:{iconMask:true,},config:{id:\"top-toolbar\",items:[{xtype:\"container\",left:0,top:\"2px\",html:['<img class=\"settings\" src=\"resources/images/cog\" /> <div class=\"user name\">Christofer Falkman</div>']}]}});Ext.define(\"EM.view.LastUpdated",202670,33,"lastupdated\",config:{id:\"last-updated\",data:{},tpl:'<img id=\"clock\" src=\"resources/images/clock.png\" />Senast uppdaterad: {lastUpdated}'}});Ext.define(\"EM.view.MainNav\",{extend:\"Ext.Toolbar\",xtype:\"mainnav\",requires:[\"Ext.SegmentedButton\"],config:{id:\"main-nav\",dock:\"top\",items:[{xtype:\"segmentedbutton\",docked:\"right\",allowDepress:false,cls:\"nav-item\",items:[{id:\"results-nav-item\",text:\"Mitt tips\",pressed:true,},{id:\"standings-nav-item\",text:\"Deltagare\"}],}]}});Ext.define(\"EM.view.MyStats",202670,33,"mystats\",config:{id:\"my-stats\",html:['<div id=\"league-select\">Alla ligor</div>','<div id=\"my-ranking\">47<span class=\"total-contestants\">/241</span></div>'].join(\"\")}});Ext.define(\"EM.view.StandingsPage",202670,33,"standingspage\",config:{id:\"standings-page\",showAnimation:Ext.create(\"Ext.fx.animation.Slide\",{direction:\"left\"}),items:[{xtype:\"container\",html:[\"<h1>Tabeller, s\ufffff\ufffff sm\ufffff\ufffffningom.</h1>\",].join(\"\")}]}});Ext.define(\"EM.view.ResultsPage",202670,33,"resultspage\",config:{id:\"results-page\",showAnimation:Ext.create(\"Ext.fx.animation.Slide\",{direction:\"right\"}),items:[{xtype:\"roundselector\",},{xtype:\"lastupdated\",},{xtype:\"matchlist\",}]}});Ext.define(\"EM.view.RoundSelector\",{extend:\"Ext.Toolbar\",xtype:\"roundselector\",requires:[\"Ext.SegmentedButton\"],config:{id:\"round-selector\",scrollable:{direction:\"horizontal\",directionLock:true}",226636,34,"Nav\",{extend:\"Ext.app.Controller\",init:function(){var a={}},launch:function(){this.addNewPageInMainIfNotAlreadyExists(\"#results-page\",\"EM.view.ResultsPage\")},config:{refs:{resultsNav:\"#results-nav-item\",standingsNav:\"#standings-nav-item\",main:\"#main\"},control:{resultsNav:{tap:\"doTapResultNavItem\"},standingsNav:{tap:\"doTapStandingsNavItem\"},}},doTapResultNavItem:function(){this.removePreviousPageFromMainIfExists(\"#standings-page\");this.addNewPageInMainIfNotAlreadyExists(\"#results-page\",\"EM.view.ResultsPage\")},doTapStandingsNavItem:function(){this.removePreviousPageFromMainIfExists(\"#results-page\");this.addNewPageInMainIfNotAlreadyExists(\"#standings-page\",\"EM.view.StandingsPage\")},addNewPageInMainIfNotAlreadyExists:function(c,b){var a=this.getMain();var d=a.child(c);if(!d){d=a.add(Ext.create(b,{hidden:true}))}this.setCurrentVisiblePage(d);d.show()},removePreviousPageFromMainIfExists:function(a){this.getCurrentVisiblePage().hide()},getCurrentVisiblePage:function(){return this.currentVisiblePage},setCurrentVisiblePage:function(a){this.currentVisiblePage=a},});var roundMenu=Ext.create(\"Ext.SegmentedButton\",{config:{allowDepress:false,cls:\"round-selector-items\",docked:\"top\"},});Ext.define(\"EM.controller.MatchList\",{extend:\"Ext.app.Controller\",init:function(){var c=Ext.create(\"EM.store.Rounds\",{});var b=Ext.create(\"EM.store.Matches\",{});var a=[];c.load({callback:function(){c.each(function(d){var e=d.data;a.push({id:\"round-\"+e.roundId+\"-selector\",text:e.name,iconAlign:\"right\",iconCls:(e.isLocked?\"round-locked\":\"round-open\"),});d.matches().each(function(f){b.add(f)})});roundMenu.setItems(a)}})},launch:function(){this.getRoundSelector().add(roundMenu);this.doUpdateLastUpdated()},config:{refs:{lastUpdated:\"#last-updated\",matchList:\"#match-list\",resultsPage:\"#results-page\",roundSelector:\"#round-selector\"},control:{matchList:{itemtap:function(c,d,h,b,g,f){}},\"#round-1-selector\":{tap:\"doRoundFilter\"},\"#round-2-selector\":{tap:\"doRoundFilter\"},\"#round-3-selector\":{tap:\"doRoundFilter\"},\"#round-4-selector\":{tap:\"doRoundFilter\"},\"#round-5-selector\":{tap:\"doRoundFilter\"},\"#round-6-selector\":{tap:\"doRoundFilter\"}}},doUpdateLastUpdated:function(){var b=new Date(Date.now());var a={lastUpdated:b.format(\"d mmmm yyyy, H:M\")};this.getLastUpdated().setData(a)},doRoundFilter:function(b,d,c){var a=Ext.getStore(\"Matches\");this.getMatchList().deselectAll();a.clearFilter();a.filterBy(function(e,f){return e.getRound().get(\"name\")==b.config.text},this)",226945,3105,271196,230,245897,1912,255048,3453,"mixin.Sor",259485,33,266683,4518,273186,567,274444,3018,259474,7167,277754,1792,245555,346,247808,7239,273757,687,258501,973,272135,1051,277467,292,292319,8286,326184,462,290181,2133,300600,1149,341956,3996,285320,85,354620,8834,309289,16895,308496,793,326646,12348,340297,843,363455,12029,"M.model.Match\",{extend:\"Ext.data.Model\",init:function(){},config:{fields:[{name:\"gameId\",type:\"int\"},{name:\"firstTeam\",type:\"string\"},{name:\"firstTeamFlag\",type:\"string\",convert:function(b,a){return matchExt.getTeamFlagOrElse(a.get(\"firstTeam\"),\"\")}},{name:\"secondTeam\",type:\"string\"},{name:\"secondTeamFlag\",type:\"string\",convert:function(b,a){return matchExt.getTeamFlagOrElse(a.get(\"secondTeam\"),\"\")}},\"kickOff\",{name:\"kickOffHour\",convert:function(c,a){var b=new Date(EM.app.convertUnixTimeToMilliseconds(a.get(\"kickOff\")));return Ext.Date.format(b,\"H:i\")}},{name:\"firstTeamGoals",346293,36,"secondTeamGoals",346293,36,"firstTeamGoalsBet\",},{name:\"secondTeamGoalsBet\",},\"matchPoints\",{name:\"pointsEarned\",convert:function(b,a){return matchExt.getPointsEarnedOrElse(a.get(\"matchPoints\"),\"\")}},{name:\"bettingOutcome\",type:\"string\",convert:function(b,a){return matchExt.correctBettedResults(a.get(\"matchPoints\"),a.get(\"firstTeamGoals\"),a.get(\"secondTeamGoals\"),a.get(\"firstTeamGoalsBet\"),a.get(\"secondTeamGoalsBet\"))}},],associations:{type:\"belongsTo\",model:\"EM.model.Round\",name:\"round\",autoLoad:true}}});var matchExt=(function(){var a={};a.correctBettedResults=function(c,f,d,e,b){if(typeof c==\"undefined\"||c==0){return\"\"}if(this.checkForCorrectResultBet(f,d,e,b)){return\"correct-result\"}if(this.checkFirstTeamWin(f,d,e,b)){return\"first-team-win\"}if(this.checkSecondTeamWin(f,d,e,b)){return\"second-team-win\"}if(this.checkDraw(f,d,e,b)){return\"drawed\"}};a.checkForCorrectGoalDifference=function(e,c,d,b){return(e-c)==(d-b)};a.checkForCorrectResultBet=function(e,c,d,b){return(d==e)&&(b==c)};a.checkFirstTeamWin=function(e,c,d,b){return(e>c)&&(d>b)};a.checkSecondTeamWin=function(e,c,d,b){return(e<c)&&(d<b)};a.checkDraw=function(e,c,d,b){return(e==c)&&(d==b)};a.getTeamFlagOrElse=function(c,b){if(c==\"TBD\"){return b}return'<span class=\"'+c.toLowerCase()+'\"></span>'};a.getPointsEarnedOrElse=function(d,b){var c=\"no-points-earned\";if(typeof d==\"undefined\"){return b}if(d>0){c=\"points-earned\"}return'<div class=\"'+c+'\">'+d+\"</div>\"};return a})(",341117,844,375492,13039,"var initialFilter=new Ext.util.Filter({filterFn:function(a){return a.getRound().get(\"name\")==\"Omg\ufffff\ufffffng 1\"}});Ext.define(\"EM.store.Matches\",{extend:\"Ext.data.Store\",config:{model:\"EM.model.Match\",storeId:\"Matches\",filters:initialFilter,grouper:{groupFn:function(b){var a=new Date(EM.app.convertUnixTimeToMilliseconds(b.get(\"kickOff\")));return a.format(\"d mmmm yyyy\")},sortProperty:\"kickOff\"},}});Ext.define(\"EM.store.Rounds\",{extend:\"Ext.data.Store\",config:{model:\"EM.model.Round\",storeId:\"Rounds\",}});Ext.define(\"EM.view.MatchList\",{extend:\"Ext.List\",xtype:\"matchlist\",requires:[\"Ext.TitleBar\",\"EM.store.Rounds\",\"EM.store.Matches\"],config:{id:\"match-list\",store:\"Matches\",grouped:true,scrollable:false,itemTpl:['<div class=\"match-meta-data\">','<div class=\"team-wrapper home-team\">{firstTeam} <div class=\"flag\">{firstTeamFlag}</div> <span class=\"goals-scored\">{firstTeamGoals}</span></div>','<div class=\"kick-off-time\">{kickOffHour}</div>','<div class=\"team-wrapper away-team\"><span class=\"goals-scored\">{secondTeamGoals}</span> <div class=\"flag\">{secondTeamFlag}</div> {secondTeam}</div>','<div class=\"bet-meta-data {bettingOutcome}\">','<img class=\"user-icon\" src=\"resources/images/user-22x26.png\" />','<div class=\"home-team goals-bet\">{firstTeamGoalsBet}</div>','<div class=\"away-team goals-bet\">{secondTeamGoalsBet}</div>',\"{pointsEarned}\",\"</div>\",\"</div>\",].join(\"\")},});Ext.define(\"Ext.data.proxy.Rest\",{extend:\"Ext.data.proxy.Ajax\",alternateClassName:\"Ext.data.RestProxy\",alias:\"proxy.rest\",config:{appendId:true,format:null,batchActions:false,",340474,49,"UT\",destroy:\"DELETE\"}},buildUrl:function(f){var i=this,e=f.getOperation(),c=e.getRecords()||[],h=c[0],g=i.getModel(),k=g.getIdProperty(),j=i.getFormat(),a=i.getUrl(f),d=f.getParams()||{},b=(h&&!h.phantom)?h.getId():d[k];if(i.getAppendId()&&b){if(!a.match(/\\/$/)){a+=\"/\"}a+=b;delete d[k]}if(j){if(!a.match(/\\.$/)){a+=\".\"}a+=j}f.setUrl(a);return i.callParent([f])}});Ext.define(\"EM.model.Round\",{extend:\"Ext.data.Model\",init:function(){},config:{fields:[\"roundId\",\"name\",\"lockedDate\",{name:\"isLocked\",type:\"boolean\",convert:function(b,a){return a.get(\"lockedDate\")>Date.now()}},\"matches\",],associations:[{type:\"hasMany\",model:\"EM.model.Match\",name:\"matches\",autoLoad:true,}],proxy:{type:\"rest\",url:\"http://172.20.60.179/~eriktoyra/EM/resources/json/matches.json\",reader:{type:\"json\",}},},",414684,704,"name:\"EM\",requires:[\"Ext.SegmentedButton\",],controllers:[\"MainNav\",\"MatchList\"],models:[\"Match\",\"Round\"],stores:[\"Matches\",\"Rounds\"],views:[\"Main\",\"Viewport\",\"TopToolbar\",\"LastUpdated\",\"MainNav\",\"MyStats\",\"StandingsPage\",\"ResultsPage\",\"RoundSelector\",\"MatchList",415482,325,"create(\"EM.view.Viewport\",{}",415846,188,",convertUnixTimeToMilliseconds:function(a){return a*1000}});"]